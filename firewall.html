<!DOCTYPE html>
<html lang="pt-MZ">
<head>
  <meta charset="UTF-8" />
  <!-- üîí Viewport bloqueado para zoom -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Dep√≥sito | Mozivs</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f9fafb;
      --text: #111827;
      --border: #d1d5db;
      --primary: #1d4ed8;
      --success: #059669;
      --error: #dc2626;
      --gray: #6b7280;
      --radius: 8px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    /* üîí Prevenir zoom e ajustes indesejados */
    html {
      touch-action: manipulation;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 20px;
      max-width: 100vw;
      margin: 0 auto;
      min-height: 100vh;
      overflow-x: hidden;
      font-size: 16px; /* Base geral definida como 16px */
    }

    .card {
      background: white;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .title {
      font-size: 16px; /* Reduzido de 18px para 16px */
      font-weight: 600;
      margin-bottom: 14px;
    }

    .subtitle {
      font-size: 13px; /* Levemente reduzido para equilibrar */
      color: var(--gray);
      margin-bottom: 18px;
    }

    .values {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .value-btn {
      padding: 8px;
      text-align: center;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .value-btn:hover {
      background: #f1f5f9;
    }

    .value-btn.selected {
      border-color: var(--primary);
      background: #eff6ff;
      color: var(--primary);
      font-weight: 500;
    }

    .info {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 12px;
      font-size: 13px;
      margin-bottom: 18px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .info-label {
      color: var(--gray);
    }

    .input-group {
      margin-bottom: 18px;
    }

    .input-group label {
      display: block;
      font-size: 13px;
      margin-bottom: 5px;
      color: var(--text);
    }

    .input-field {
      width: 100%;
      padding: 9px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 14px;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--primary);
    }

    .btn-pay {
      width: 100%;
      padding: 11px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
    }

    .btn-pay:hover:not(:disabled) {
      background: #1e40af;
    }

    .btn-pay:disabled {
      background: #d1d5db;
      cursor: not-allowed;
    }

    /* NOTIFICA√á√ïES */
    .notification {
      padding: 10px 14px;
      border-radius: var(--radius);
      font-size: 13px;
      margin-bottom: 14px;
      display: none;
    }

    .notification.success {
      background: #ecfdf5;
      color: var(--success);
      border: 1px solid #d1fae5;
    }

    .notification.error {
      background: #fef2f2;
      color: var(--error);
      border: 1px solid #fecaca;
    }

    .notification.loading {
      background: #f0f9ff;
      color: #0891b2;
      border: 1px solid #bae6fd;
    }

    /* RODAP√â */
    .footer {
      text-align: center;
      margin-top: 18px;
      font-size: 12px;
      color: var(--gray);
    }

    /* üîí Evitar que o usu√°rio redimensione o texto */
    @media (hover: none) and (pointer: coarse) {
      * {
        touch-action: manipulation;
      }
    }
  </style>
</head>
<body>

  <div class="card">
    <!-- Notifica√ß√£o -->
    <div id="notification" class="notification"></div>

    <h2 class="title">Fazer Investimento</h2>
    <!-- Imagem adicionada (agora menor) -->
    <div style="text-align: center; margin: 12px 0;">
      <img src="https://i.imgur.com/ezsUjaH.png" alt="Logo" style="max-width: 80px; height: auto;">
    </div>
    <p class="subtitle">Escolha um valor e pague com seu Mpesa.</p>

    <!-- Valores pr√©-definidos -->
    <div class="values">
      <button class="value-btn" data-value="250.00">250 MT</button>
      <button class="value-btn" data-value="500.00">500 MT</button>
      <button class="value-btn" data-value="1000.00">1.000 MT</button>
      <button class="value-btn" data-value="1500.00">1.500 MT</button>
      <button class="value-btn" data-value="2000.00">2.000 MT</button>
      <button class="value-btn" data-value="3000.00">3.000 MT</button>
      <button class="value-btn" data-value="4000.00">4.000 MT</button>
    </div>

    <!-- Detalhes do pagamento -->
    <div class="info">
      <div class="info-row">
        <span class="info-label">Valor a pagar</span>
        <span id="invest-value">0,00 MT</span>
      </div>
      <div class="info-row">
        <span class="info-label">Retorno (3x)</span>
        <span id="return-value">0,00 MT</span>
      </div>
      <div class="info-row">
        <span class="info-label">Tempo de retorno</span>
        <span>30 minutos</span>
      </div>
    </div>

    <!-- Campo do n√∫mero Mpesa -->
    <div class="input-group">
      <label for="phone">N√∫mero do Mpesa</label>
      <input type="tel" id="phone" class="input-field" placeholder="84 123 4567" maxlength="9" />
    </div>

    <!-- Bot√£o de pagamento -->
    <button id="payBtn" class="btn-pay" disabled>Fazer Pagamento</button>
  </div>

  <!-- Rodap√© -->
  <div class="footer">
    Desenvolvido pela SheinMoney
  </div>

  <script>
    // üîê SUAS CREDENCIAIS
    const AUTH_TOKEN = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6ImQxMmFmYWNhLWVhNDctNGNkZS04NmJlLWJlMDM5Mzc2OTczMiIsImVtYWlsIjoienVuaWFtdW5pcjMwQGdtYWlsLmNvbSIsImlhdCI6MTc1Njk5MTk0MiwiZXhwIjoxNzU2OTk1NTQyfQ.7KFXSdhTEG1NkyyATa7sL256TUb_t2T_oqh3TVHdabc";
    const WALLET_ID = "50c282d1-843f-4b9c-a287-2140e9e8d94b"; // Carteira: mozivs
    const API_KEY = "b3b33cba8a903626a015d592754f1dcec756e9fbb12d411516f4a79b04aba8923ebb6396da29e61c899154ab005aaf056961b819c263e1ec5d88c60b9cae6aba";

    // Elementos
    const valueBtns = document.querySelectorAll('.value-btn');
    const investValueEl = document.getElementById('invest-value');
    const returnValueEl = document.getElementById('return-value');
    const phoneInput = document.getElementById('phone');
    const payBtn = document.getElementById('payBtn');
    const notification = document.getElementById('notification');

    let selectedValue = null;

    // Formata valor monet√°rio
    function formatCurrency(value) {
      return new Intl.NumberFormat('pt-MZ', {
        style: 'decimal',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(value) + " MT";
    }

    // Atualiza os valores exibidos
    function updateInvestmentDetails() {
      const returnValue = selectedValue * 3;
      investValueEl.textContent = formatCurrency(selectedValue);
      returnValueEl.textContent = formatCurrency(returnValue);
    }

    // Sele√ß√£o de valor
    valueBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        valueBtns.forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        selectedValue = parseFloat(btn.getAttribute('data-value'));
        updateInvestmentDetails();
        checkCanPay();
      });
    });

    // Verifica se o bot√£o pode ser habilitado
    function checkCanPay() {
      const phoneValid = phoneInput.value.length === 9 && /^\d{9}$/.test(phoneInput.value);
      payBtn.disabled = !(selectedValue && phoneValid);
    }

    // Valida√ß√£o do n√∫mero
    phoneInput.addEventListener('input', () => {
      phoneInput.value = phoneInput.value.replace(/\D/g, '');
      checkCanPay();
    });

    // Mostrar notifica√ß√£o
    function showNotification(message, type) {
      notification.textContent = message;
      notification.className = `notification ${type}`;
      notification.style.display = 'block';

      setTimeout(() => {
        notification.style.display = 'none';
      }, 5000);
    }

    // Envio da transfer√™ncia
    payBtn.addEventListener('click', async () => {
      if (!selectedValue || !phoneInput.value) return;

      payBtn.disabled = true;
      payBtn.textContent = "Inves...";

      showNotification("‚è≥ Enviando pagamento...", "loading");

      const payload = {
        wallet_id: WALLET_ID,
        amount: selectedValue,
        number_phone: phoneInput.value,
        alert_sms: {
          api_key: API_KEY,
          sender_id: "Mozivs",
          phone: "852154364",
          phone_customer: phoneInput.value,
          message: `Dep√≥sito de ${selectedValue}MZN confirmado.`,
          customer_message: `Seu investimento de ${selectedValue}MZN foi recebido. Retorno de ${selectedValue * 3}MZN em 30 minutos.`
        }
      };

      try {
        const response = await fetch(" https://gibrapay.online/v1/transfer ", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "API-Key": API_KEY
          },
          body: JSON.stringify(payload)
        });

        const data = await response.json();

        if (data.status === "success") {
          showNotification(`‚úÖ Pagamento de ${formatCurrency(selectedValue)} feito! Confirme com PIN no Mpesa.`, "success");
          payBtn.textContent = "Feito";
        } else {
          const errorMsg = data.message || "Falha no investimento";
          showNotification(`Erro: ${errorMsg}`, "error");
          payBtn.disabled = false;
          payBtn.textContent = "Fazer investimento";
        }
      } catch (error) {
        console.error("Erro de conex√£o:", error);
        showNotification("Erro de rede. Verifique sua conex√£o.", "error");
        payBtn.disabled = false;
        payBtn.textContent = "Fazer investimento";
      }
    });
  </script>
</body>
</html>
